<nav class="navbar navbar-expand-lg navbar-primary bg-primary text-white mb-5 ">
  <div class="container-fluid d-flex justify-content-between">
    <a class="btn btn-outline-light" routerLink="instructor-profile">
       {{ 'course-header.Back to Dashboard' | transloco }}
    </a>
    <span class="navbar-brand  text-white">{{courseObj.courseTitle}}</span>
    <!-- <button class="btn btn-light">Preview</button> -->
  </div>
</nav>
<div *ngIf="courseObj?.courseType === 'Recorded Educational Courses'" id="Recorded_Educational_Courses">
  <div class="container mb-5">
    <div class="row">
      <div class="col-md-3 mb-3">
        <ul class="list-group">
          <li *ngFor="let step of stepsRecorded_Educational_Courses; let i = index"
              class="list-group-item"
              [class.active]="i === currentStep">
            {{ 'course-header.Step' | transloco }} {{ i + 1 }}:   {{ activeLang === 'ar' ? step.titleAr : step.titleEn }}

          </li>
        </ul>
      </div>

      <div class="col-md-9 content-section rounded-2">


  <!-- Step 2: Course Landing Page -->

    <div *ngIf="currentStep === 0">


<div class="card p-4">
      <h3 class="mb-3">{{ 'course-header.Landing Page' | transloco }}</h3>

      <form #courseForm="ngForm">


        <div class="mb-3">
          <label class="form-label">{{ 'course-header.Description' | transloco }}</label>
          <input type="text" class="form-control" [(ngModel)]="course.description" name="description" required>
        </div>

        <div class="row">
          <div class="col-md-6">
            <label class="form-label">{{ 'course-header.Language' | transloco }}</label>
            <select class="form-select" [(ngModel)]="course.language" name="language" required>
              <option value="Arabic">{{ 'course-header.Arabic' | transloco }}</option>
              <option value="English">{{ 'course-header.English' | transloco }}</option>
            </select>
          </div>
          <div class="col-md-6">
            <label class="form-label">{{ 'course-header.Set Level' | transloco }}</label>
            <select class="form-select" [(ngModel)]="course.level" name="level" required>
              <option value="1"> {{ 'course-header.Beginner' | transloco }}</option>
              <option value="2">{{ 'course-header.Intermediate' | transloco }}</option>
              <option value="3">{{ 'course-header.Advanced' | transloco }}</option>
            </select>
          </div>
        </div>

        <div class="row mt-3">

          <div class="col-md-6">
            <label class="form-label">{{ 'course-header.Course Duration' | transloco }}</label>
           <select class="form-select" [(ngModel)]="course.duration" name="duration" required>
  <option value="Week - 2 weeks">{{ 'course-header.Week_2' | transloco }}</option>
  <option value="2 Week - 3 weeks">{{ 'course-header.Week_3' | transloco }}</option>
  <option value="Month - 2 Monthes">{{ 'course-header.Month_2' | transloco }}</option>
  <option value="2 Monthes - 3 Monthes">{{ 'course-header.Month_3' | transloco }}</option>
  <option value="3 Monthes - 4 Monthes">{{ 'course-header.Month_4' | transloco }}</option>
  <option value="4 Monthes - 5 Monthes">{{ 'course-header.Month_5' | transloco }}</option>
</select>

          </div>


          <div class="col-md-6">
            <label class="form-label">{{ 'course-header.Course Photo' | transloco }}</label>
            <input type="file" class="form-control" (change)="onFileSelectedd($event, 'photo')" accept=".jpg,.jpeg,.png,.webp,.bmp,.gif,.svg,.jfif,image/*">
          </div>
        </div>

        <div class="row mt-3">
          <div class="col-md-6">
            <label class="form-label">{{ 'course-header.Promo Video' | transloco }}</label>
            <input type="file" class="form-control" (change)="onFileSelectedd($event, 'video')" accept="video/*">
          </div>

        </div>
<div class="row mt-3">
  <h5 class="mb-3">{{ 'course-header.General Attachments' | transloco }}</h5>
  <div *ngFor="let attachment of summaryAttachments; let i = index" class="row mb-3 align-items-center">
    <div class="col-md-4">
      <label class="form-label">{{ 'course-header.File Name' | transloco }}</label>
      <input type="text" class="form-control" [(ngModel)]="attachment.name" name="attachmentName{{i}}" [attr.placeholder]="'course-header.File Name' | transloco" />
    </div>
    <div class="col-md-4">
      <label class="form-label">{{ 'course-header.File Description' | transloco }}</label>
      <input type="text" class="form-control" [(ngModel)]="attachment.description" name="attachmentDescription{{i}}" [attr.placeholder]="'course-header.File Description' | transloco" />
    </div>
    <div class="col-md-3">
      <label class="form-label">{{ 'course-header.File' | transloco }}</label>
      <input type="file" class="form-control" (change)="onSummaryAttachmentFileSelected($event, i)">
    </div>
    <div class="col-md-1">
      <button type="button" class="btn btn-danger btn-sm mt-4" (click)="removeSummaryAttachment(i)" [disabled]="summaryAttachments.length === 1">
        &times;
      </button>
    </div>
  </div>
  <div class="col-12">
    <button class="btn btn-sm btn-outline-primary" (click)="addSummaryAttachment()">{{ 'course-header.+ Add Another File' | transloco }}</button>
  </div>
</div>

      </form>
    </div>

<div class="card mt-2 pb-4">

      <div class="container mt-4">
        <!-- Pricing Section -->
         <div class="card-body">
  <h5 class="card-title">{{ 'course-header.Pricing' | transloco }}</h5>
  <p class="fw-bold">{{ 'course-header.Set a price for your course' | transloco }}</p>

  <div class="form-check form-switch mb-3">
    <input class="form-check-input" type="checkbox" id="isPaidToggle" [(ngModel)]="courseData.isPaid">
    <label class="form-check-label" for="isPaidToggle">
      {{ courseData.isPaid ? ('course-header.Paid' | transloco) : ('course-header.Free' | transloco) }}
    </label>
  </div>

  <div *ngIf="courseData.isPaid">
    <div class="row g-2">
      <div class="col-md-6">
        <label class="form-label">{{ 'course-header.Price' | transloco }}</label>
        <input class="form-control" type="number" [(ngModel)]="courseData.price" placeholder="">
      </div>

      <div class="col-md-6">
        <label class="form-label">{{ 'course-header.Currency' | transloco }}</label>
        <select class="form-select" [(ngModel)]="courseData.currency">
          <option value="SAR">SAR</option>
          <option value="USD">USD</option>
          <option value="EUR">EUR</option>
        </select>
      </div>
    </div>
  </div>

  <div *ngIf="!courseData.isPaid" class="alert alert-info mt-3">
    {{ 'course-header.This course is free' | transloco }}
  </div>
</div>

      </div>
    </div>
</div>

<!-- Step 2: Curriculum -->
  <div *ngIf="currentStep === 1" class="container mt-4">
    <h3 class="mb-4">{{ 'course-header.Curriculum' | transloco }}</h3>

  <div *ngFor="let section of sections; let sectionIndex = index" class="card mb-4">
    <div class="card-body">
      <h5 class="fw-bold mb-3">
  {{ 'course-header.Section' | transloco }} {{ sectionIndex + 1 }}
</h5>

      <div class="d-flex flex-column align-items-start">
        <button class="btn btn-danger btn-sm mb-2" (click)="removeSection(sectionIndex)">
          {{ 'course-header.Delete Section' | transloco }}
        </button>

        <input [(ngModel)]="section.name"
               class="form-control mb-2 w-100"
               [attr.placeholder]="'course-header.Section Name' | transloco" />

        <input [(ngModel)]="section.description"
               class="form-control mb-3 w-100"
               [attr.placeholder]="'course-header.Description' | transloco" />
      </div>

      <!-- Section Files -->
      <div *ngFor="let attachment of section.attachments; let sFileIndex = index" class="row mb-2">
        <div class="col-md-4">
          <input type="file" class="form-control"
                 (change)="onSectionFileSelected($event, sectionIndex, sFileIndex)"
                 accept=".pdf,application/pdf" />
        </div>
        <div class="col-md-4">
          <input type="text" class="form-control"
                 [(ngModel)]="attachment.name"
                 [attr.placeholder]="'course-header.File Name' | transloco" />
        </div>
        <div class="col-md-3">
          <input type="text" class="form-control"
                 [(ngModel)]="attachment.description"
                 [attr.placeholder]="'course-header.File Description' | transloco" />
        </div>
        <div class="col-md-1 d-flex align-items-center">
          <button class="btn btn-danger btn-sm" (click)="removeSectionFile(sectionIndex, sFileIndex)">×</button>
        </div>
      </div>

      <button class="btn btn-sm btn-outline-primary mb-4" (click)="addSectionFile(sectionIndex)">
        {{ 'course-header.+ Add Section File' | transloco }}
      </button>

      <!-- Section Content: Lectures & Subsections -->
      <div *ngFor="let item of section.content; let ci = index">
        <!-- Lecture Item -->
        <ng-container *ngIf="item.type === 'lecture'">
          <div class="mb-4 border rounded p-3 bg-white">
            <div class="d-flex justify-content-between align-items-center">
              <strong>{{ 'course-header.Lecture' | transloco }}</strong>
              <button class="btn btn-danger btn-sm mb-2" (click)="removeLecture(sectionIndex, ci)">
                {{ 'course-header.Delete Lecture' | transloco }}
              </button>
            </div>

            <input [(ngModel)]="item.data.title"
                   class="form-control mb-2"
                   [attr.placeholder]="'course-header.Lecture Title' | transloco" />

            <div class="nav nav-tabs mb-2">
              <button class="nav-link"
                      [class.active]="item.data.activeTab === 'video'"
                      (click)="item.data.activeTab = 'video'">
                {{ 'course-header.Video' | transloco }}
              </button>
              <button class="nav-link"
                      [class.active]="item.data.activeTab === 'description'"
                      (click)="item.data.activeTab = 'description'">
                {{ 'course-header.Description' | transloco }}
              </button>
            </div>

            <div *ngIf="item.data.activeTab === 'video'" class="mb-2">
              <div class="custom-file-upload">
                <span *ngIf="!item.data.videoName" class="file-placeholder">
                  {{ 'course-header.No selected file' | transloco }}
                </span>
                <span *ngIf="item.data.videoName" class="file-name">
                  {{ item.data.videoName }}
                </span>
                <input type="file" #fileInput hidden
                       (change)="onFileSelected($event, sectionIndex, ci)"
                       accept="video/*" />
                <button class="btn btn-link select-video-btn" (click)="fileInput.click()">
                  {{ 'course-header.Select Video' | transloco }}
                </button>
              </div>
            </div>

            <div *ngIf="item.data.activeTab === 'description'" class="mb-2">
              <textarea [(ngModel)]="item.data.description"
                        class="form-control"
                        [attr.placeholder]="'course-header.Enter video description' | transloco"></textarea>
            </div>

            <!-- Lecture Files -->
            <div *ngFor="let file of item.data.files; let fileIndex = index" class="row mb-2">
              <div class="col-md-4">
                <input type="file" class="form-control"
                       (change)="onLectureFileSelected($event, sectionIndex, ci, fileIndex)"
                       accept=".pdf,application/pdf" />
              </div>
              <div class="col-md-4">
                <input type="text" class="form-control"
                       [(ngModel)]="file.name"
                       [attr.placeholder]="'course-header.File Name' | transloco" />
              </div>
              <div class="col-md-3">
                <input type="text" class="form-control"
                       [(ngModel)]="file.description"
                       [attr.placeholder]="'course-header.File Description' | transloco" />
              </div>
              <div class="col-md-1 d-flex align-items-center">
                <button class="btn btn-danger btn-sm"
                        (click)="removeLectureFile(sectionIndex, ci, fileIndex)">×</button>
              </div>
            </div>

            <button class="btn btn-sm btn-outline-primary mb-3"
                    (click)="addLectureFile(sectionIndex, ci)">
              {{ 'course-header.+ Add Lecture File' | transloco }}
            </button>
          </div>
        </ng-container>

        <!-- SubSection Item -->
        <ng-container *ngIf="item.type === 'subsection'">
          <div class="border rounded p-3 mb-4 bg-light">
            <div class="d-flex justify-content-between align-items-center mb-2">
              <h5>{{ 'course-header.SubSection' | transloco }}</h5>
              <button class="btn btn-danger btn-sm" (click)="removeSubSection(sectionIndex, ci)">
                {{ 'course-header.Delete SubSection' | transloco }}
              </button>
            </div>

            <input [(ngModel)]="item.data.name"
                   class="form-control mb-2"
                   [attr.placeholder]="'course-header.SubSection Name' | transloco" />

            <input [(ngModel)]="item.data.description"
                   class="form-control mb-3"
                   [attr.placeholder]="'course-header.Description' | transloco" />

            <!-- SubSection Files -->


            <!-- Lectures inside SubSection -->
            <div *ngFor="let lecture of item.data.lectures; let li = index" class="mb-3">
  <div class="border rounded p-3 bg-white">
    <div class="d-flex justify-content-between align-items-center">
      <strong>{{ 'course-header.Lecture' | transloco }}</strong>
      <button class="btn btn-danger btn-sm mb-3" (click)="removeLectureFromSubSection(sectionIndex, ci, li)">
        {{ 'course-header.Delete Lecture' | transloco }}
      </button>
    </div>

    <input [(ngModel)]="lecture.title"
           class="form-control mb-2"
           [attr.placeholder]="'course-header.Lecture Title' | transloco" />

    <div class="nav nav-tabs mb-2">
      <button class="nav-link"
              [class.active]="lecture.activeTab === 'video'"
              (click)="lecture.activeTab = 'video'">
        {{ 'course-header.Video' | transloco }}
      </button>
      <button class="nav-link"
              [class.active]="lecture.activeTab === 'description'"
              (click)="lecture.activeTab = 'description'">
        {{ 'course-header.Description' | transloco }}
      </button>
    </div>

    <div *ngIf="lecture.activeTab === 'video'" class="mb-2">
      <div class="custom-file-upload">
        <span *ngIf="!lecture.videoName" class="file-placeholder">
          {{ 'course-header.No selected file' | transloco }}
        </span>
        <span *ngIf="lecture.videoName" class="file-name">
          {{ lecture.videoName }}
        </span>
        <input type="file" #fileSubInput hidden
               (change)="onSubSectionLectureVideoSelected($event, sectionIndex, ci, li)"
               accept="video/*" />
        <button class="btn btn-link select-video-btn" (click)="fileSubInput.click()">
          {{ 'course-header.Select Video' | transloco }}
        </button>
      </div>
    </div>

    <div *ngIf="lecture.activeTab === 'description'" class="mb-2">
      <textarea [(ngModel)]="lecture.description"
                class="form-control"
                [attr.placeholder]="'course-header.Enter video description' | transloco"></textarea>
    </div>

    <!-- ✅ ملفات المحاضرة داخل SubSection -->
    <div *ngFor="let file of lecture.files; let fileIndex = index" class="row mb-2">
      <div class="col-md-4">
        <input type="file" class="form-control"
               (change)="onSubSectionLectureFileSelected($event, sectionIndex, ci, li, fileIndex)"
               accept=".pdf,application/pdf" />
      </div>
      <div class="col-md-4">
        <input type="text" class="form-control"
               [(ngModel)]="file.name"
               [attr.placeholder]="'course-header.File Name' | transloco" />
      </div>
      <div class="col-md-3">
        <input type="text" class="form-control"
               [(ngModel)]="file.description"
               [attr.placeholder]="'course-header.File Description' | transloco" />
      </div>
      <div class="col-md-1 d-flex align-items-center">
        <button class="btn btn-danger btn-sm"
                (click)="removeSubSectionLectureFile(sectionIndex, ci, li, fileIndex)">×</button>
      </div>
    </div>

    <button class="btn btn-sm btn-outline-primary mb-3"
            (click)="addSubSectionLectureFile(sectionIndex, ci, li)">
      {{ 'course-header.+ Add Lecture File' | transloco }}
    </button>
  </div>
</div>


            <button class="btn btn-sm btn-secondary" (click)="addLectureToSubSection(sectionIndex, ci)">
              {{ 'course-header.+ Add Lecture' | transloco }}
            </button>
          </div>
        </ng-container>
      </div>

      <!-- Buttons to add Lecture or SubSection -->
      <div class="mt-3 d-flex gap-2">
        <button class="btn btn-outline-primary btn-sm" (click)="addLecture(sectionIndex)">
          {{ 'course-header.+ Add Lecture' | transloco }}
        </button>
        <button class="btn btn-outline-secondary btn-sm" (click)="addSubSection(sectionIndex)">
          {{ 'course-header.+ Add SubSection' | transloco }}
        </button>
      </div>
    </div>
  </div>

  <button class="btn btn-primary w-100" (click)="addSection()">
    {{ 'course-header.+ Add Section' | transloco }}
  </button>
  </div>



  <!-- Step 3: Pricing & Promotions Page -->
  <!-- <div *ngIf="currentStep === 2" class="container mt-4">

  </div> -->

  <!-- Step 4: Create Coupons Page -->

  <div *ngIf="currentStep === 2" class="container mt-4">
  <div class="container mt-4">
    <div *ngFor="let coupon of coupons; let i = index" class="card shadow-sm p-4 mb-3">
      <h5 class="fw-bold">{{ 'course-header.Coupon' | transloco }} {{ i + 1 }}</h5>

      <!-- Coupon Code -->
      <div class="mb-3">
        <label class="form-label">{{ 'course-header.Coupon code' | transloco }}</label>
        <input type="text" class="form-control" [(ngModel)]="coupon.code" name="code-{{i}}">
      </div>

      <!-- Discount Percentage -->
      <div class="mb-3">
        <label class="form-label">{{ 'course-header.Discount percentage' | transloco }}</label>
        <input type="number" class="form-control" [(ngModel)]="coupon.discount" name="discount-{{i}}" min="0" max="100" placeholder="%">
      </div>

      <!-- Active toggle (boolean) -->
      <!-- <div class="form-check form-switch mb-3">
        <input class="form-check-input" type="checkbox" id="activeToggle{{i}}" [(ngModel)]="coupon.active" name="active-{{i}}">
        <label class="form-check-label" for="activeToggle{{i}}">
          {{ coupon.active ? ('course-header.Active' | transloco) : ('course-header.Inactive' | transloco) }}
        </label>
      </div> -->

      <!-- Remove Coupon Button -->
      <button *ngIf="coupons.length > 1" class="btn btn-danger" (click)="removeCoupon(i)">
        {{ 'course-header.Remove' | transloco }}
      </button>
    </div>

    <!-- Add Coupon Button -->
    <button class="btn btn-primary" (click)="addCoupon()">
      {{ 'course-header.Add Coupon' | transloco }}
    </button>
  </div>
</div>


        <!-- Navigation Buttons -->
        <button class="btn btn-secondary mt-3 m-2" *ngIf="currentStep > 0" (click)="prevStep()"> {{ 'course-header.Previous' | transloco }}</button>
        <button class="btn btn-primary mt-3 m-2"
        *ngIf="currentStep < stepsRecorded_Educational_Courses.length - 1"
        (click)="nextStep1()"
       >
  {{ 'course-header.Next' | transloco }}
  </button>
  <p *ngIf="warningMessageKey" class="text-danger">
    {{ warningMessageKey | transloco }}
  </p>

<!-- زر حفظ كمسودة -->
<button
  class="btn btn-outline-secondary mt-3 m-2"
  *ngIf="currentStep === 0 ||currentStep === 1 "
  (click)="saveAsDraft()"
  [disabled]="isLoading"
>
  {{ 'course-header.Save as Draft' | transloco }}
</button>
<!-- السبنر -->
<div class="spinner-border text-secondary mt-2" role="status" *ngIf="isLoading2">
  <span class="visually-hidden">Loading...</span>
</div>

 <!-- زر الإرسال -->
<button
  class="btn btn-success mt-3 m-2"
  *ngIf="currentStep === stepsRecorded_Educational_Courses.length - 1"
  (click)="nextStep1()"
  [disabled]="isLoading"
>
  {{ 'course-header.Submit for Review' | transloco }}
</button>

<!-- السبنر -->
<div class="spinner-border text-primary mt-2" role="status" *ngIf="isLoading">
  <span class="visually-hidden">Loading...</span>
</div>

      </div>




    </div>
  </div>
</div>


<div *ngIf="courseObj?.courseType === 'Live Streamed Educational Courses'"  id="Live_Streamed_Educational_Courses">
  <div class="container mb-5">
    <div class="row">
      <div class="col-md-3 mb-3">
        <ul class="list-group">
          <li *ngFor="let step of stepsLive_Streamed_Educational_Courses; let i = index"
              class="list-group-item"
              [class.active]="i === currentStep">
                  {{ 'course-header.Step' | transloco }}
            {{ i + 1 }}:   {{ activeLang === 'ar' ? step.titleAr : step.titleEn }}

          </li>
        </ul>
      </div>

      <div class="col-md-9 content-section rounded-2">

        <!-- Step 1: Schedules -->
   <div *ngIf="currentStep === 0">
  <h3 class="mb-4">{{ 'course-header.Instructor Schedules' | transloco }}</h3>

  <div *ngFor="let module of instructorModules; let moduleIndex = index" class="card mb-4">
    <div class="card-body">
      <h5 class="fw-bold mb-3">
        {{ 'course-header.Section' | transloco }} {{ moduleIndex + 1 }}
      </h5>

      <div class="d-flex flex-column align-items-start mb-3">
        <button class="btn btn-danger btn-sm mb-2" (click)="removeModule(moduleIndex)">
          {{ 'course-header.Delete Section' | transloco }}
        </button>

        <input [(ngModel)]="module.title"
               class="form-control mb-2 w-100"
               [attr.placeholder]="'course-header.Section Title' | transloco" />

        <textarea [(ngModel)]="module.description"
                  class="form-control mb-3 w-100"
                  [attr.placeholder]="'course-header.Section Description' | transloco"></textarea>
      </div>

      <!-- Module Files -->
      <div *ngFor="let doc of module.files; let docIndex = index" class="row mb-2">
        <div class="col-md-4">
          <input type="file" class="form-control"
                 (change)="onModuleFileUpload($event, moduleIndex, docIndex)"
                 accept=".pdf,application/pdf" />
        </div>
        <div class="col-md-4">
          <input type="text" class="form-control"
                 [(ngModel)]="doc.name"
                 [attr.placeholder]="'course-header.File Name' | transloco" />
        </div>
        <div class="col-md-3">
          <input type="text" class="form-control"
                 [(ngModel)]="doc.description"
                 [attr.placeholder]="'course-header.File Description' | transloco" />
        </div>
        <div class="col-md-1 d-flex align-items-center">
          <button class="btn btn-danger btn-sm" (click)="removeModuleFile(moduleIndex, docIndex)">×</button>
        </div>
      </div>

      <button class="btn btn-sm btn-outline-primary mb-4" (click)="addModuleFile(moduleIndex)">
        {{ 'course-header.+ Add Section File' | transloco }}
      </button>

      <!-- Content: Lessons & Units -->
      <div *ngFor="let content of module.content; let cIndex = index">

        <!-- Lesson -->
        <ng-container *ngIf="content.type === 'lesson'">
          <div class="border rounded p-3 mb-3 bg-white">
            <div class="d-flex justify-content-between align-items-center mb-2">
              <strong>{{ 'course-header.Lecture' | transloco }}</strong>
              <button class="btn btn-danger btn-sm" (click)="removeLesson(moduleIndex, cIndex)">
                {{ 'course-header.Delete Lecture' | transloco }}
              </button>
            </div>

            <input [(ngModel)]="content.data.title" class="form-control mb-2"
                   [attr.placeholder]="'course-header.Lecture Title' | transloco" />
            <input [(ngModel)]="content.data.lecturerName" class="form-control mb-2"
                   [attr.placeholder]="'course-header.Lecturer Name' | transloco" />
            <textarea [(ngModel)]="content.data.description" class="form-control mb-2"
                      [attr.placeholder]="'course-header.Description' | transloco"></textarea>
            <input [(ngModel)]="content.data.startTime" type="datetime-local" class="form-control mb-2" />
            <!-- <input [(ngModel)]="content.data.durationInMinutes" type="number" class="form-control mb-2"
                   [attr.placeholder]="'course-header.Duration (Minutes)' | transloco" /> -->
            <input [(ngModel)]="content.data.zoomJoinUrl" class="form-control mb-2"
                   [attr.placeholder]="'course-header.Zoom Join URL' | transloco" />
            <input [(ngModel)]="content.data.zoomPassword" class="form-control mb-2"
                   [attr.placeholder]="'course-header.Zoom Password' | transloco" />
            <!-- <input type="checkbox" [(ngModel)]="content.data.isInstant" class="form-check-input me-2" />
            <label class="form-check-label">{{ 'course-header.Is Instant' | transloco }}</label> -->
            <input [(ngModel)]="content.data.status" type="text" class="form-control mb-2"
                   [attr.placeholder]="'course-header.Status' | transloco" />
            <input [(ngModel)]="content.data.maxParticipants" type="number" class="form-control mb-2"
                   [attr.placeholder]="'course-header.Max Participants' | transloco" />

            <!-- Lesson Files -->
            <div *ngFor="let file of content.data.files; let fIndex = index" class="row mb-2">
              <div class="col-md-4">
                <input type="file" class="form-control"
                       (change)="onLessonFileUpload($event, moduleIndex, cIndex, fIndex)"
                       accept=".pdf,application/pdf" />
              </div>
              <div class="col-md-4">
                <input type="text" class="form-control"
                       [(ngModel)]="file.name"
                       [attr.placeholder]="'course-header.File Name' | transloco" />
              </div>
              <div class="col-md-3">
                <input type="text" class="form-control"
                       [(ngModel)]="file.description"
                       [attr.placeholder]="'course-header.File Description' | transloco" />
              </div>
              <div class="col-md-1 d-flex align-items-center">
                <button class="btn btn-danger btn-sm"
                        (click)="removeLessonFile(moduleIndex, cIndex, fIndex)">×</button>
              </div>
            </div>

            <button class="btn btn-sm btn-outline-primary mb-3"
                    (click)="addLessonFile(moduleIndex, cIndex)">
              {{ 'course-header.+ Add Lecture File' | transloco }}
            </button>
          </div>
        </ng-container>

        <!-- Sub Section -->
  <ng-container *ngIf="content.type === 'unit'">
  <div class="border rounded p-3 mb-4 bg-light">
    <div class="d-flex justify-content-between align-items-center mb-2">
      <h5>{{ 'course-header.SubSection' | transloco }}</h5>
      <button class="btn btn-danger btn-sm" (click)="removeUnit(moduleIndex, cIndex)">
        {{ 'course-header.Delete SubSection' | transloco }}
      </button>
    </div>

    <input [(ngModel)]="content.data.name" class="form-control mb-2"
           [attr.placeholder]="'course-header.SubSection Name' | transloco" />

    <input [(ngModel)]="content.data.description" class="form-control mb-3"
           [attr.placeholder]="'course-header.Description' | transloco" />

    <!-- Lectures in SubSection -->
    <div *ngFor="let lesson of content.data.lessons; let li = index" class="border rounded p-3 mb-2 bg-white">
      <div class="d-flex justify-content-between align-items-center mb-2">
        <strong>{{ 'course-header.Lecture' | transloco }}</strong>
        <button class="btn btn-danger btn-sm" (click)="removeLessonFromUnit(moduleIndex, cIndex, li)">
          {{ 'course-header.Delete Lecture' | transloco }}
        </button>
      </div>

      <input [(ngModel)]="lesson.title" class="form-control mb-2"
             [attr.placeholder]="'course-header.Lecture Title' | transloco" />
      <input [(ngModel)]="lesson.lecturerName" class="form-control mb-2"
             [attr.placeholder]="'course-header.Lecturer Name' | transloco" />
      <textarea [(ngModel)]="lesson.description" class="form-control mb-2"
                [attr.placeholder]="'course-header.Description' | transloco"></textarea>
      <input [(ngModel)]="lesson.startTime" type="datetime-local" class="form-control mb-2" />
      <input [(ngModel)]="lesson.zoomJoinUrl" class="form-control mb-2"
             [attr.placeholder]="'course-header.Zoom Join URL' | transloco" />
      <input [(ngModel)]="lesson.zoomPassword" class="form-control mb-2"
             [attr.placeholder]="'course-header.Zoom Password' | transloco" />
      <input [(ngModel)]="lesson.status" type="text" class="form-control mb-2"
             [attr.placeholder]="'course-header.Status' | transloco" />
      <input [(ngModel)]="lesson.maxParticipants" type="number" class="form-control mb-2"
             [attr.placeholder]="'course-header.Max Participants' | transloco" />

      <!-- ✅ Lesson Files inside Unit -->
      <div *ngFor="let file of lesson.files; let fileIndex = index" class="row mb-2">
        <div class="col-md-4">
          <input type="file" class="form-control"
                 (change)="onUnitLessonFileUpload($event, moduleIndex, cIndex, li, fileIndex)"
                 accept=".pdf,application/pdf" />
        </div>
        <div class="col-md-4">
          <input type="text" class="form-control"
                 [(ngModel)]="file.name"
                 [attr.placeholder]="'course-header.File Name' | transloco" />
        </div>
        <div class="col-md-3">
          <input type="text" class="form-control"
                 [(ngModel)]="file.description"
                 [attr.placeholder]="'course-header.File Description' | transloco" />
        </div>
        <div class="col-md-1 d-flex align-items-center">
          <button class="btn btn-danger btn-sm"
                  (click)="removeLessonFileFromUnit(moduleIndex, cIndex, li, fileIndex)">×</button>
        </div>
      </div>

      <button class="btn btn-sm btn-outline-primary mb-3"
              (click)="addLessonFileToUnit(moduleIndex, cIndex, li)">
        {{ 'course-header.+ Add Lecture File' | transloco }}
      </button>
    </div>

    <button class="btn btn-sm btn-secondary" (click)="addLessonToUnit(moduleIndex, cIndex)">
      {{ 'course-header.+ Add Lecture' | transloco }}
    </button>
  </div>
</ng-container>

      </div>

      <!-- Add Buttons -->
      <div class="mt-3 d-flex gap-2">
        <button class="btn btn-outline-primary btn-sm" (click)="addLesson(moduleIndex)">
          {{ 'course-header.+ Add Lecture' | transloco }}
        </button>
        <button class="btn btn-outline-secondary btn-sm" (click)="addUnit(moduleIndex)">
          {{ 'course-header.+ Add SubSection' | transloco }}
        </button>
      </div>
    </div>
  </div>

  <button class="btn btn-primary w-100" (click)="addModule()">
    {{ 'course-header.+ Add Section' | transloco }}
  </button>
</div>






<div *ngIf="currentStep === 1" class="container mt-4">
    <div class="card p-4">
      <h3 class="mb-3">{{ 'course-header.Landing Page' | transloco }}</h3>

      <form #courseForm="ngForm">


        <div class="mb-3">
          <label class="form-label">{{ 'course-header.Description' | transloco }}</label>
          <input type="text" class="form-control" [(ngModel)]="course.description" name="description" required>
        </div>

        <div class="row">
          <div class="col-md-6">
            <label class="form-label">{{ 'course-header.Language' | transloco }}</label>
            <select class="form-select" [(ngModel)]="course.language" name="language" required>
              <option>{{ 'course-header.Arabic' | transloco }}</option>
              <option>{{ 'course-header.English' | transloco }}</option>
            </select>
          </div>
          <div class="col-md-6">
            <label class="form-label">{{ 'course-header.Set Level' | transloco }}</label>
            <select class="form-select" [(ngModel)]="course.level" name="level" required>
              <option> {{ 'course-header.Beginner' | transloco }}</option>
              <option>{{ 'course-header.Intermediate' | transloco }}</option>
              <option>{{ 'course-header.Advanced' | transloco }}</option>
            </select>
          </div>
        </div>

        <div class="row mt-3">

          <div class="col-md-6">
            <label class="form-label">{{ 'course-header.Course Duration' | transloco }}</label>
           <select class="form-select" [(ngModel)]="course.duration" name="duration" required>
  <option value="Week - 2 weeks">{{ 'course-header.Week_2' | transloco }}</option>
  <option value="2 Week - 3 weeks">{{ 'course-header.Week_3' | transloco }}</option>
  <option value="Month - 2 Monthes">{{ 'course-header.Month_2' | transloco }}</option>
  <option value="2 Monthes - 3 Monthes">{{ 'course-header.Month_3' | transloco }}</option>
  <option value="3 Monthes - 4 Monthes">{{ 'course-header.Month_4' | transloco }}</option>
  <option value="4 Monthes - 5 Monthes">{{ 'course-header.Month_5' | transloco }}</option>
</select>

          </div>


          <div class="col-md-6">
            <label class="form-label">{{ 'course-header.Course Photo' | transloco }}</label>
            <input type="file" class="form-control" (change)="onFileSelectedd2($event, 'photo')" accept=".jpg,.jpeg,.png,.webp,.bmp,.gif,.svg,.jfif,image/*">
          </div>
        </div>

        <div class="row mt-3">
          <div class="col-md-6">
            <label class="form-label">{{ 'course-header.Promo Video' | transloco }}</label>
            <input type="file" class="form-control" (change)="onFileSelectedd2($event, 'video')" accept="video/*">
          </div>

        </div>
<div class="row mt-3">

  <!-- رفع الكتاب PDF -->
  <div class="col-md-6">
    <label class="form-label">{{ 'course-header.Course Book (PDF)' | transloco }}</label>
    <input
      type="file"
      class="form-control"
      (change)="onFileSelectedd2($event, 'book')"
      accept=".pdf,application/pdf">
  </div>

  <!-- اسم الكتاب -->
  <div class="col-md-6">
  <label class="form-label">{{ 'course-header.Book Title' | transloco }}</label>
    <input
      type="text"
    class="form-control"
    [(ngModel)]="course.bookTitle"
    name="bookTitle">
  </div>

  <!-- وصف الكتاب -->
  <div class="col-md-6">
  <label class="form-label">{{ 'course-header.Book Description' | transloco }}</label>
    <input
     type="text"
    class="form-control"
    [(ngModel)]="course.bookDescription"
    name="bookDescription">
  </div>

</div>

<!--
        <div class="mb-3 mt-3">
          <label class="form-label"> {{ 'course-header.Lecturer Name' | transloco }}</label>
          <input type="text" class="form-control" [(ngModel)]="course.lecturer" name="lecturer" required>
        </div>

        <div class="mb-3">
          <label class="form-label"> {{ 'course-header.Lecturer Description' | transloco }}</label>
          <input type="text" class="form-control" [(ngModel)]="course.lecturerDescription" name="lecturerDescription" required>
        </div> -->

      </form>
    </div>
  </div>


  <!-- Step 3: Pricing & Promotions Page -->
 <div *ngIf="currentStep === 2" class="container mt-4">
    <div class="card pb-4">

      <div class="container mt-4">
        <!-- Pricing Section -->
         <div class="card-body">
  <h5 class="card-title">{{ 'course-header.Pricing' | transloco }}</h5>
  <p class="fw-bold">{{ 'course-header.Set a price for your course' | transloco }}</p>

  <div class="form-check form-switch mb-3">
    <input class="form-check-input" type="checkbox" id="isPaidToggle" [(ngModel)]="courseData.isPaid">
    <label class="form-check-label" for="isPaidToggle">
      {{ courseData.isPaid ? ('course-header.Paid' | transloco) : ('course-header.Free' | transloco) }}
    </label>
  </div>

  <div *ngIf="courseData.isPaid">
    <div class="row g-2">
      <div class="col-md-6">
        <label class="form-label">{{ 'course-header.Price' | transloco }}</label>
        <input class="form-control" type="number" [(ngModel)]="courseData.price" placeholder="">
      </div>

      <div class="col-md-6">
        <label class="form-label">{{ 'course-header.Currency' | transloco }}</label>
        <select class="form-select" [(ngModel)]="courseData.currency">
          <option value="SAR">SAR</option>
          <option value="USD">USD</option>
          <option value="EUR">EUR</option>
        </select>
      </div>
    </div>
  </div>

  <div *ngIf="!courseData.isPaid" class="alert alert-info mt-3">
    {{ 'course-header.This course is free' | transloco }}
  </div>
</div>


        <!-- Promotions Section -->
        <!-- <div class="card mb-3">
            <div class="card-body">
                <h5 class="card-title">{{ 'course-header.Promotions' | transloco }}</h5>
                <p class="fw-bold">{{ 'course-header.Offer Conditions' | transloco }}</p>
                <p class="text-muted">{{ 'course-header.Each time a student uses this link, the instructor will receive 80%...' | transloco }}</p>
                <div class="input-group">
                    <input type="text" class="form-control" [(ngModel)]="courseData.promoLink" [attr.placeholder]="'course-header.Copy link' | transloco"   >
                    <button class="btn btn-primary" (click)="pastePromoLink()">Paste</button>
                </div>
            </div>
        </div> -->

        <!-- Purchase Vouchers Section -->
        <!-- <div class="card mb-3">
          <div class="card-body">
              <h5 class="card-title"> {{ 'course-header.Purchase Vouchers' | transloco }}</h5>
              <div class="row">
                  <div class="col-md-6" *ngFor="let option of courseData.voucherOptions; let i = index">
                      <div class="form-check">
                          <input class="form-check-input" type="radio" name="voucher-option" [(ngModel)]="courseData.selectedVoucher" [value]="option.value">
                          <label class="form-check-label"> {{ activeLang === 'ar' ? option.labelAr : option.labelEn }}</label>
                      </div>
                      <ul>
                        <li *ngFor="let feature of activeLang === 'ar' ? option.featuresAr : option.featuresEn">
                          {{ feature }}
                        </li>

                      </ul>
                  </div>
              </div>
              <button class="btn btn-primary mt-3" (click)="saveData()"> {{ 'course-header.Purchase Vouchers' | transloco }}</button>
          </div>
        </div> -->

      </div>
    </div>
  </div>

  <!-- Step 4: Create Coupons Page -->

  <div *ngIf="currentStep === 3" class="container mt-4">
  <div class="container mt-4">
    <div *ngFor="let coupon of coupons; let i = index" class="card shadow-sm p-4 mb-3">
      <h5 class="fw-bold">{{ 'course-header.Coupon' | transloco }} {{ i + 1 }}</h5>

      <!-- Coupon Code -->
      <div class="mb-3">
        <label class="form-label">{{ 'course-header.Coupon code' | transloco }}</label>
        <input type="text" class="form-control" [(ngModel)]="coupon.code" name="code-{{i}}">
      </div>

      <!-- Discount Percentage -->
      <div class="mb-3">
        <label class="form-label">{{ 'course-header.Discount percentage' | transloco }}</label>
        <input type="number" class="form-control" [(ngModel)]="coupon.discount" name="discount-{{i}}" min="0" max="100" placeholder=" 20 %">
      </div>

      <!-- Active toggle (boolean) -->
      <!-- <div class="form-check form-switch mb-3">
        <input class="form-check-input" type="checkbox" id="activeToggle{{i}}" [(ngModel)]="coupon.active" name="active-{{i}}">
        <label class="form-check-label" for="activeToggle{{i}}">
          {{ coupon.active ? ('course-header.Active' | transloco) : ('course-header.Inactive' | transloco) }}
        </label>
      </div> -->

      <!-- Remove Coupon Button -->
      <button *ngIf="coupons.length > 1" class="btn btn-danger" (click)="removeCoupon(i)">
        {{ 'course-header.Remove' | transloco }}
      </button>
    </div>

    <!-- Add Coupon Button -->
    <button class="btn btn-primary" (click)="addCoupon()">
      {{ 'course-header.Add Coupon' | transloco }}
    </button>
  </div>
</div>


        <!-- Navigation Buttons -->
        <button class="btn btn-secondary mt-3 m-2" *ngIf="currentStep > 0" (click)="prevStep()"> {{ 'course-header.Previous' | transloco }}
        </button>
        <button class="btn btn-primary mt-3 m-2"
        *ngIf="currentStep < stepsLive_Streamed_Educational_Courses.length - 1"
        (click)="nextStep2()"
        >
        {{ 'course-header.Next' | transloco }}
</button>
<p *ngIf="warningMessageKey" class="text-danger">
  {{ warningMessageKey | transloco }}
</p>



  <button class="btn btn-success mt-3 m-2" *ngIf="currentStep === stepsLive_Streamed_Educational_Courses.length - 1" (click)="nextStep2()" >
    {{ 'course-header.Submit for Review' | transloco }}
  </button>
  <div class="spinner-border text-primary mt-2" role="status" *ngIf="isLoading">
  <span class="visually-hidden">Loading...</span>
</div>
      </div>

    </div>
  </div>
</div>
