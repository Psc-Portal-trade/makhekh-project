<section id="portfolio" class="Portfolio mb-5 pt-5">
    <div class="section-head container">
        <h3 class="py-5">
            {{"home.secondary-section-home.all the skills you need in one place." | transloco}}
        </h3>
    </div>

    <div class="container-fluid">
        <div class="row p-0 overflow-hidden">
            <div>

                <!-- Tabs من الكاتيجوريز (كلها) -->
                <div class="menu-1 py-2" *ngIf="!isLoading && !error">
                    <ul class="nav nav-pills mb-3 justify-content-center" role="tablist">
                        <li class="nav-item" role="presentation" *ngFor="let cat of categories; let i = index">
                            <button class="nav-link" [class.active]="i === 0" [attr.id]="'pills-cat-tab-'+i" data-bs-toggle="pill" [attr.data-bs-target]="'#pills-cat-'+i" type="button" role="tab" [attr.aria-controls]="'pills-cat-'+i" [attr.aria-selected]="i === 0">
                {{ cat.name }}
              </button>
                        </li>
                    </ul>
                </div>

                <!-- حالة التحميل/الخطأ -->
                <div class="text-center py-4" *ngIf="isLoading">Loading...</div>
                <div class="alert alert-danger text-center" *ngIf="!isLoading && error">{{ error }}</div>

                <!-- Tab Content -->
                <div class="tab-content" *ngIf="!isLoading && !error">
                    <div class="tab-pane fade" *ngFor="let cat of categories; let i = index" [class.show]="i === 0" [class.active]="i === 0" [attr.id]="'pills-cat-'+i" role="tabpanel" [attr.aria-labelledby]="'pills-cat-tab-'+i" tabindex="0">
                        <div class="container py-5">
                            <div class="row gy-3 m-0 px-0 overflow-hidden" *ngIf="(coursesByCategory[cat.id] || []).length; else noCourses">
                                <div *ngFor="let course of (coursesByCategory[cat.id] || [])" class="col-12 col-md-6 col-lg-4 mb-4">
                                    <div class="card lecture-card">
                                        <div (click)="goToCourseDetails(course)" style="cursor: pointer;">
                                            <div class="video-thumbnail">
                                                <div class="vid-img">
                                                    <img [src]="course.src || 'assets/placeholder.jpg'" style="width: 100%; height: 200px;" alt="">
                                                </div>
                                            </div>
                                            <div class="card-body">
                                                <h5 class="card-title">{{ course.courseTitle }}</h5>
                                                <p class="card-text small text-muted">
                                                    {{ course.landingPage?.description }}
                                                </p>
                                                <p class="content">
                                                    {{ course.rate }}
                                                    <i class="fa-solid fa-star text-warning"></i>
                                                    <span class="text-muted"> ({{ course.watched }})</span>
                                                </p>
                                                <p *ngIf="course.pricing?.price !== null">
                                                    {{ course.pricing?.price }} {{ course.pricing?.currency || '' }}
                                                </p>
                                            </div>
                                        </div>

                                        <!-- <div class="d-flex justify-content-between px-2 pb-3">
                                            <button class="btn btn-design1" *ngIf="!course.isInCart" (click)="addToCart(course)">Add to Cart</button>
                                            <button class="btn btn-design2" *ngIf="course.isInCart" (click)="removeFromCart(course)">Remove from Cart</button>
                                            <button class="btn heart" *ngIf="!course.isInWishlist" (click)="addToWishList(course)">
                        <i class="fa-regular fa-heart"></i>
                      </button>
                                            <button class="btn heart" *ngIf="course.isInWishlist" (click)="removeFromWishList(course)">
                        <i class="fa-solid fa-heart"></i>
                      </button>
                                        </div> -->
                                    </div>
                                </div>
                            </div>

                            <ng-template #noCourses>
                                <div class="alert alert-info text-center mb-0">
                                    {{"home.secondary-section-home.There are no courses in this category currently." | transloco}}

                                </div>
                            </ng-template>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</section>